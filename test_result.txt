Compiling 1 files with Solc 0.8.24
Solc 0.8.24 finished in 9.59s
Compiler run successful!

Ran 7 tests for test/UNAIMarketplaceTest.t.sol:StakeMarketplaceTest
[PASS] testCancelListing() (gas: 360332)
Logs:
  Setting up test environment...
  Test environment set up complete.
  User1 balance: 1000000
  User2 balance: 1000000
  Testing cancel listing...
  User1 staking tokens and creating listing...
  User1 cancelling listing...
  Listing active status after cancellation: false
  Listing fulfilled status after cancellation: false

[PASS] testCreateAndFulfillListing() (gas: 678660)
Logs:
  Setting up test environment...
  Test environment set up complete.
  User1 balance: 1000000
  User2 balance: 1000000
  Testing create and fulfill listing...
  User1 approving tokens for staking...
  User1 staking tokens...
  User1 creating listing...
  Listing created. Seller: 0x0000000000000000000000000000000000000001
  Stake ID: 0
  Price: 150
  Active: true
  Fulfilled: false
  User2 approving tokens for purchase...
  User2 fulfilling listing...
  Listing active status after fulfillment: false
  Listing fulfilled status after fulfillment: true
  User2 stake amount after fulfillment: 100

[PASS] testFulfillInactiveListing() (gas: 363879)
Logs:
  Setting up test environment...
  Test environment set up complete.
  User1 balance: 1000000
  User2 balance: 1000000
  Testing fulfill inactive listing...
  User1 staking tokens, creating and cancelling listing...
  User2 attempting to fulfill cancelled listing...
  Fulfilling inactive listing reverted as expected.

[PASS] testGetActiveListings() (gas: 571880)
Logs:
  Setting up test environment...
  Test environment set up complete.
  User1 balance: 1000000
  User2 balance: 1000000
  Testing get active listings...
  User1 staking tokens and creating listings...
  Number of active listings: 2
  Active Listing 0
  Seller: 0x0000000000000000000000000000000000000001
  Stake ID: 0
  Price: 150
  Active: true
  Fulfilled: false
  Active Listing 1
  Seller: 0x0000000000000000000000000000000000000001
  Stake ID: 1
  Price: 200
  Active: true
  Fulfilled: false

[PASS] testUnauthorizedListingCancellation() (gas: 360935)
Logs:
  Setting up test environment...
  Test environment set up complete.
  User1 balance: 1000000
  User2 balance: 1000000
  Testing unauthorized listing cancellation...
  User1 staking tokens and creating listing...
  User2 attempting to cancel User1's listing...
  Unauthorized listing cancellation reverted as expected.

[PASS] testUnauthorizedListingCreation() (gas: 29208)
Logs:
  Setting up test environment...
  Test environment set up complete.
  User1 balance: 1000000
  User2 balance: 1000000
  Testing unauthorized listing creation...
  User2 attempting to create unauthorized listing...
  Unauthorized listing creation reverted as expected.

[PASS] testUpdateListingPrice() (gas: 359156)
Logs:
  Setting up test environment...
  Test environment set up complete.
  User1 balance: 1000000
  User2 balance: 1000000
  Testing update listing price...
  User1 staking tokens and creating listing...
  User1 updating listing price...
  New listing price: 200

Suite result: ok. 7 passed; 0 failed; 0 skipped; finished in 2.67s (48.54ms CPU time)

Ran 4 tests for test/UNAITest.t.sol:UNAITest
[PASS] test_SellWithUpdatedStakingRewardsFee() (gas: 618501)
Logs:
  Sell amount: 1000000000000000000000
  Sell total fees: 7
  Staking rewards fee: 4

[PASS] test_StakingRewardsDistribution() (gas: 799102)
[FAIL. Reason: Contract should have more tokens after sell due to fees: 149363985978968452679018 <= 449323985978968452679018] test_StakingRewardsFeeOnSell() (gas: 768857)
Logs:
  Initial contract token balance: 449323985978968452679018
  Initial staking rewards tokens: 0
  Final contract token balance: 149363985978968452679018
  Final staking rewards tokens: 10000000000000000000

Traces:
  [768857] UNAITest::test_StakingRewardsFeeOnSell()
    ├─ [0] VM::deal(ECRecover: [0x0000000000000000000000000000000000000001], 1000000000000000000 [1e18])
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [264] UniswapV2Router02::WETH() [staticcall]
    │   └─ ← [Return] WETH: [0x7b79995e5f793A07Bc00c21412e50Ecae098E7f9]
    ├─ [218954] UniswapV2Router02::swapExactETHForTokensSupportingFeeOnTransferTokens{value: 1000000000000000000}(0, [0x7b79995e5f793A07Bc00c21412e50Ecae098E7f9, 0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], ECRecover: [0x0000000000000000000000000000000000000001], 1726265088 [1.726e9])
    │   ├─ [23846] WETH::deposit{value: 1000000000000000000}()
    │   │   ├─ emit Deposit(dst: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], wad: 1000000000000000000 [1e18])
    │   │   └─ ← [Stop] 
    │   ├─ [7893] WETH::transfer(MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], 1000000000000000000 [1e18])
    │   │   ├─ emit Transfer(from: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], to: MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], value: 1000000000000000000 [1e18])
    │   │   └─ ← [Return] true
    │   ├─ [2964] Contract::balanceOf(ECRecover: [0x0000000000000000000000000000000000000001]) [staticcall]
    │   │   └─ ← [Return] 0
    │   ├─ [2517] MetaMultiSigWallet::getReserves() [staticcall]
    │   │   └─ ← [Return] 0x000000000000000000000000000000000000000000084595161401484a0000000000000000000000000000000000000000000000000000000de0b6b3a76400000000000000000000000000000000000000000000000000000000000066e4b700
    │   ├─ [446] WETH::balanceOf(MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205]) [staticcall]
    │   │   └─ ← [Return] 2000000000000000000 [2e18]
    │   ├─ [158617] MetaMultiSigWallet::swap(4992488733099649474211316 [4.992e24], 0, ECRecover: [0x0000000000000000000000000000000000000001], 0x)
    │   │   ├─ [136017] Contract::transfer(ECRecover: [0x0000000000000000000000000000000000000001], 4992488733099649474211316 [4.992e24])
    │   │   │   ├─ emit Transfer(from: MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], to: Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 449323985978968452679018 [4.493e23])
    │   │   │   ├─ emit Transfer(from: MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], to: ECRecover: [0x0000000000000000000000000000000000000001], value: 4543164747120681021532298 [4.543e24])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [964] Contract::balanceOf(MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205]) [staticcall]
    │   │   │   └─ ← [Return] 5007511266900350525788684 [5.007e24]
    │   │   ├─ [446] WETH::balanceOf(MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205]) [staticcall]
    │   │   │   └─ ← [Return] 2000000000000000000 [2e18]
    │   │   ├─ emit Sync(: 5007511266900350525788684 [5.007e24], : 2000000000000000000 [2e18])
    │   │   ├─ emit Swap(param0: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], param1: 0, param2: 1000000000000000000 [1e18], param3: 4992488733099649474211316 [4.992e24], param4: 0, param5: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   ├─ [964] Contract::balanceOf(ECRecover: [0x0000000000000000000000000000000000000001]) [staticcall]
    │   │   └─ ← [Return] 4543164747120681021532298 [4.543e24]
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [964] Contract::balanceOf(ECRecover: [0x0000000000000000000000000000000000000001]) [staticcall]
    │   └─ ← [Return] 4543164747120681021532298 [4.543e24]
    ├─ [0] VM::assertGt(4543164747120681021532298 [4.543e24], 0, "User1 should have some tokens after buying") [staticcall]
    │   └─ ← [Return] 
    ├─ [1473] Contract::tokensForStaking() [staticcall]
    │   └─ ← [Return] 0
    ├─ [964] Contract::balanceOf(Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f]) [staticcall]
    │   └─ ← [Return] 449323985978968452679018 [4.493e23]
    ├─ [0] console::log("Initial contract token balance:", 449323985978968452679018 [4.493e23]) [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Initial staking rewards tokens:", 0) [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24414] Contract::approve(UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], 1000000000000000000000 [1e21])
    │   ├─ emit Approval(owner: ECRecover: [0x0000000000000000000000000000000000000001], spender: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], value: 1000000000000000000000 [1e21])
    │   └─ ← [Return] true
    ├─ [264] UniswapV2Router02::WETH() [staticcall]
    │   └─ ← [Return] WETH: [0x7b79995e5f793A07Bc00c21412e50Ecae098E7f9]
    ├─ [485184] UniswapV2Router02::swapExactTokensForETHSupportingFeeOnTransferTokens(1000000000000000000000 [1e21], 0, [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f, 0x7b79995e5f793A07Bc00c21412e50Ecae098E7f9], ECRecover: [0x0000000000000000000000000000000000000001], 1726265088 [1.726e9])
    │   ├─ [394592] Contract::transferFrom(ECRecover: [0x0000000000000000000000000000000000000001], MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], 1000000000000000000000 [1e21])
    │   │   ├─ [264] UniswapV2Router02::WETH() [staticcall]
    │   │   │   └─ ← [Return] WETH: [0x7b79995e5f793A07Bc00c21412e50Ecae098E7f9]
    │   │   ├─ emit Approval(owner: Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], spender: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], value: 283333333333333333333334 [2.833e23])
    │   │   ├─ [73891] UniswapV2Router02::swapExactTokensForETHSupportingFeeOnTransferTokens(283333333333333333333334 [2.833e23], 0, [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f, 0x7b79995e5f793A07Bc00c21412e50Ecae098E7f9], Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 1726265088 [1.726e9])
    │   │   │   ├─ [11216] Contract::transferFrom(Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], 283333333333333333333334 [2.833e23])
    │   │   │   │   ├─ emit Transfer(from: Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], to: MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], value: 283333333333333333333334 [2.833e23])
    │   │   │   │   ├─ emit Approval(owner: Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], spender: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], value: 0)
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [517] MetaMultiSigWallet::getReserves() [staticcall]
    │   │   │   │   └─ ← [Return] 0x000000000000000000000000000000000000000000042461baceaa1cc380520c0000000000000000000000000000000000000000000000001bc16d674ec800000000000000000000000000000000000000000000000000000000000066e4b700
    │   │   │   ├─ [964] Contract::balanceOf(MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205]) [staticcall]
    │   │   │   │   └─ ← [Return] 5290844600233683859122018 [5.29e24]
    │   │   │   ├─ [36793] MetaMultiSigWallet::swap(0, 106799100823601869 [1.067e17], UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], 0x)
    │   │   │   │   ├─ [22993] WETH::transfer(UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], 106799100823601869 [1.067e17])
    │   │   │   │   │   ├─ emit Transfer(from: MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], to: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], value: 106799100823601869 [1.067e17])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [964] Contract::balanceOf(MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205]) [staticcall]
    │   │   │   │   │   └─ ← [Return] 5290844600233683859122018 [5.29e24]
    │   │   │   │   ├─ [446] WETH::balanceOf(MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205]) [staticcall]
    │   │   │   │   │   └─ ← [Return] 1893200899176398131 [1.893e18]
    │   │   │   │   ├─ emit Sync(: 5290844600233683859122018 [5.29e24], : 1893200899176398131 [1.893e18])
    │   │   │   │   ├─ emit Swap(param0: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], param1: 283333333333333333333334 [2.833e23], param2: 0, param3: 0, param4: 106799100823601869 [1.067e17], param5: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008])
    │   │   │   │   └─ ← [Stop] 
    │   │   │   ├─ [446] WETH::balanceOf(UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008]) [staticcall]
    │   │   │   │   └─ ← [Return] 106799100823601869 [1.067e17]
    │   │   │   ├─ [9181] WETH::withdraw(106799100823601869 [1.067e17])
    │   │   │   │   ├─ [95] UniswapV2Router02::receive{value: 106799100823601869}()
    │   │   │   │   │   └─ ← [Stop] 
    │   │   │   │   ├─ emit Withdrawal(src: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], wad: 106799100823601869 [1.067e17])
    │   │   │   │   └─ ← [Stop] 
    │   │   │   ├─ [83] Contract::receive{value: 106799100823601869}()
    │   │   │   │   └─ ← [Stop] 
    │   │   │   └─ ← [Stop] 
    │   │   ├─ emit Approval(owner: Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], spender: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], value: 16666666666666666666666 [1.666e22])
    │   │   ├─ [150762] UniswapV2Router02::addLiquidityETH{value: 6282300048447169}(Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 16666666666666666666666 [1.666e22], 0, 0, 0x000000000000000000000000000000000000dEaD, 1726265088 [1.726e9])
    │   │   │   ├─ [2622] UniswapV2Factory::getPair(Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], WETH: [0x7b79995e5f793A07Bc00c21412e50Ecae098E7f9]) [staticcall]
    │   │   │   │   └─ ← [Return] MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205]
    │   │   │   ├─ [517] MetaMultiSigWallet::getReserves() [staticcall]
    │   │   │   │   └─ ← [Return] 0x00000000000000000000000000000000000000000004606142afa8712895a7620000000000000000000000000000000000000000000000001a46002febdbfd330000000000000000000000000000000000000000000000000000000066e4b700
    │   │   │   ├─ [7216] Contract::transferFrom(Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], 16666666666666666666666 [1.666e22])
    │   │   │   │   ├─ emit Transfer(from: Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], to: MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], value: 16666666666666666666666 [1.666e22])
    │   │   │   │   ├─ emit Approval(owner: Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], spender: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], value: 0)
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [21846] WETH::deposit{value: 5963763955231835}()
    │   │   │   │   ├─ emit Deposit(dst: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], wad: 5963763955231835 [5.963e15])
    │   │   │   │   └─ ← [Stop] 
    │   │   │   ├─ [3093] WETH::transfer(MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], 5963763955231835 [5.963e15])
    │   │   │   │   ├─ emit Transfer(from: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], to: MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], value: 5963763955231835 [5.963e15])
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [92765] MetaMultiSigWallet::mint(0x000000000000000000000000000000000000dEaD)
    │   │   │   │   ├─ [964] Contract::balanceOf(MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205]) [staticcall]
    │   │   │   │   │   └─ ← [Return] 5307511266900350525788684 [5.307e24]
    │   │   │   │   ├─ [446] WETH::balanceOf(MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205]) [staticcall]
    │   │   │   │   │   └─ ← [Return] 1899164663131629966 [1.899e18]
    │   │   │   │   ├─ [2338] UniswapV2Factory::feeTo() [staticcall]
    │   │   │   │   │   └─ ← [Return] 0x9Ae932dAAaC5bAAb6919e314D40952697E974555
    │   │   │   │   ├─ emit Transfer(from: MetaMultiSigWallet: [0x0000000000000000000000000000000000000000], to: 0x9Ae932dAAaC5bAAb6919e314D40952697E974555, value: 437799866216934257 [4.377e17])
    │   │   │   │   ├─ emit Transfer(from: MetaMultiSigWallet: [0x0000000000000000000000000000000000000000], to: 0x000000000000000000000000000000000000dEaD, value: 9962856276591788781 [9.962e18])
    │   │   │   │   ├─ emit Sync(: 5307511266900350525788684 [5.307e24], : 1899164663131629966 [1.899e18])
    │   │   │   │   ├─ emit Mint(param0: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], param1: 16666666666666666666666 [1.666e22], param2: 5963763955231835 [5.963e15])
    │   │   │   │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000008a432cff828642ed
    │   │   │   ├─ [83] Contract::receive{value: 318536093215334}()
    │   │   │   │   └─ ← [Stop] 
    │   │   │   └─ ← [Return] 16666666666666666666666 [1.666e22], 5963763955231835 [5.963e15], 9962856276591788781 [9.962e18]
    │   │   ├─ [60] UNAITest::receive()
    │   │   │   └─ ← [Revert] EvmError: Revert
    │   │   ├─ [60] UNAITest::receive{value: 100835336868370034}()
    │   │   │   └─ ← [Revert] EvmError: Revert
    │   │   ├─ [0] MetaMultiSigWallet::receive()
    │   │   │   └─ ← [Stop] 
    │   │   ├─ emit Transfer(from: ECRecover: [0x0000000000000000000000000000000000000001], to: Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 40000000000000000000 [4e19])
    │   │   ├─ emit Transfer(from: ECRecover: [0x0000000000000000000000000000000000000001], to: MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], value: 960000000000000000000 [9.6e20])
    │   │   ├─ emit Approval(owner: ECRecover: [0x0000000000000000000000000000000000000001], spender: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], value: 0)
    │   │   └─ ← [Return] true
    │   ├─ [517] MetaMultiSigWallet::getReserves() [staticcall]
    │   │   └─ ← [Return] 0x0000000000000000000000000000000000000000000463e8c3264dfda700520c0000000000000000000000000000000000000000000000001a5b3032ebef698e0000000000000000000000000000000000000000000000000000000066e4b700
    │   ├─ [964] Contract::balanceOf(MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205]) [staticcall]
    │   │   └─ ← [Return] 5308471266900350525788684 [5.308e24]
    │   ├─ [36793] MetaMultiSigWallet::swap(0, 342420515654220 [3.424e14], UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], 0x)
    │   │   ├─ [22993] WETH::transfer(UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], 342420515654220 [3.424e14])
    │   │   │   ├─ emit Transfer(from: MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205], to: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], value: 342420515654220 [3.424e14])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [964] Contract::balanceOf(MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205]) [staticcall]
    │   │   │   └─ ← [Return] 5308471266900350525788684 [5.308e24]
    │   │   ├─ [446] WETH::balanceOf(MetaMultiSigWallet: [0x2C4521B221443aF906E1A26001694bc5511Ec205]) [staticcall]
    │   │   │   └─ ← [Return] 1898822242615975746 [1.898e18]
    │   │   ├─ emit Sync(: 5308471266900350525788684 [5.308e24], : 1898822242615975746 [1.898e18])
    │   │   ├─ emit Swap(param0: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], param1: 960000000000000000000 [9.6e20], param2: 0, param3: 0, param4: 342420515654220 [3.424e14], param5: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008])
    │   │   └─ ← [Stop] 
    │   ├─ [446] WETH::balanceOf(UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008]) [staticcall]
    │   │   └─ ← [Return] 342420515654220 [3.424e14]
    │   ├─ [9181] WETH::withdraw(342420515654220 [3.424e14])
    │   │   ├─ [95] UniswapV2Router02::receive{value: 342420515654220}()
    │   │   │   └─ ← [Stop] 
    │   │   ├─ emit Withdrawal(src: UniswapV2Router02: [0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008], wad: 342420515654220 [3.424e14])
    │   │   └─ ← [Stop] 
    │   ├─ [3000] ECRecover::receive{value: 342420515654220}()
    │   │   └─ ← [Return] 
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [964] Contract::balanceOf(Contract: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f]) [staticcall]
    │   └─ ← [Return] 149363985978968452679018 [1.493e23]
    ├─ [1473] Contract::tokensForStaking() [staticcall]
    │   └─ ← [Return] 10000000000000000000 [1e19]
    ├─ [0] console::log("Final contract token balance:", 149363985978968452679018 [1.493e23]) [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Final staking rewards tokens:", 10000000000000000000 [1e19]) [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] VM::assertGt(149363985978968452679018 [1.493e23], 449323985978968452679018 [4.493e23], "Contract should have more tokens after sell due to fees") [staticcall]
    │   └─ ← [Revert] Contract should have more tokens after sell due to fees: 149363985978968452679018 <= 449323985978968452679018
    └─ ← [Revert] Contract should have more tokens after sell due to fees: 149363985978968452679018 <= 449323985978968452679018

[PASS] test_UpdateSellStakingRewardsFee() (gas: 33226)
Suite result: FAILED. 3 passed; 1 failed; 0 skipped; finished in 2.92s (789.33ms CPU time)

Ran 8 tests for test/UNAIStakingTest.t.sol:StakingVaultTest
[PASS] test_ClaimRewards() (gas: 724720)
Logs:
  Initial ETH balance: 0
  Final ETH balance: 1000000000000000000

[PASS] test_ExtendStake() (gas: 643673)
Logs:
  User1 Final Balance after extension: 0

[PASS] test_ExtendStakeRewardAccuracy() (gas: 1711744)
Logs:
  Initial timestamp: 1726265088
  Initial total shares: 33333333333333333333
  Timestamp after 15 days: 1727561088
  Total fees sent in first 15 days: 4500000000000000000
  Pending rewards before extension: 4499999999999999999
  Pending rewards after extension: 4499999999999999999
  Total shares after extension: 99999999999999999999
  Final timestamp: 1734041088
  Total fees sent: 19250000000000000000
  Final pending rewards: 19249999999999999999
  Claimed rewards: 19249999999999999999
  Pending rewards after claim: 0
  Remaining balance in staking vault: 1

[PASS] test_MultipleUsersStakingAndClaimingRewardsAtDifferentTimes() (gas: 1105072)
Logs:
  User1 Final Balance: 0
  User2 Final Balance: 0

[PASS] test_MultipleUsersStakingAndRewards() (gas: 1506370)
Logs:
  Total pending rewards: 9999999999999999798
  Actual rewards in contract: 10000000000000000000
  Total claimed rewards: 9999999999999999798
  Remaining rewards in contract: 202
  Remaining balance in contract: 202

[PASS] test_NoRewardsAfterTimelockExpiration() (gas: 634125)
Logs:
  Pending rewards before expiration: 0
  Pending rewards after expiration: 0

[PASS] test_StakeAndUnstake() (gas: 724639)
Logs:
  User1 balance before staking: 4543164747120681021532298
  User1 balance after staking: 4543064747120681021532298
  Staked amount: 100000000000000000000
  Start time: 1726265088
  Lock duration: 7776000
  Shares: 100000000000000000000
  User1 ETH balance before unstaking: 0
  User1 ETH balance after unstaking: 1000000000000000000

[PASS] test_TransferStake() (gas: 750636)
Suite result: ok. 8 passed; 0 failed; 0 skipped; finished in 3.04s (1.44s CPU time)

Ran 3 test suites in 3.52s (8.64s CPU time): 18 tests passed, 1 failed, 0 skipped (19 total tests)

Failing tests:
Encountered 1 failing test in test/UNAITest.t.sol:UNAITest
[FAIL. Reason: Contract should have more tokens after sell due to fees: 149363985978968452679018 <= 449323985978968452679018] test_StakingRewardsFeeOnSell() (gas: 768857)

Encountered a total of 1 failing tests, 18 tests succeeded
